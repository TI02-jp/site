<div class="nav-section">
    <div class="nav-section-title">PRINCIPAL</div>
    <ul class="nav flex-column">
        <li class="nav-item">
            <a class="nav-link{% if request.endpoint == 'dashboard' %} active{% endif %}" href="{{ url_for('dashboard') }}">
                <i class="bi bi-list-task"></i>
                PARTICULARIDADES
            </a>
        </li>
        {% if current_user.role == 'admin' %}
        {% set user_nav_endpoints = ['list_users', 'novo_usuario', 'edit_user', 'tags', 'cadastro_tag', 'editar_tag', 'online_users'] %}
        <li class="nav-item">
            <a class="nav-link{% if request.endpoint in user_nav_endpoints %} active{% endif %}" href="{{ url_for('list_users') }}">
                <i class="bi bi-people"></i>
                USUÁRIOS
            </a>
        </li>
        {% endif %}
        <li class="nav-item">
            <a class="nav-link" href="{{ url_for('consultorias') }}">
                <i class="bi bi-buildings"></i>
                CONSULTORIAS
            </a>
        </li>
        <li class="nav-item">
            <a class="nav-link{% if request.endpoint in ['acessos', 'acessos_categoria_novo'] %} active{% endif %}" href="{{ url_for('acessos') }}">
                <i class="bi bi-grid-3x3-gap"></i>
                ACESSOS
            </a>
        </li>
        <li class="nav-item">
            <a class="nav-link{% if request.endpoint == 'cursos' %} active{% endif %}" href="{{ url_for('cursos') }}">
                <i class="bi bi-mortarboard"></i>
                CURSOS
            </a>
        </li>
        <li class="nav-item">
            <a class="nav-link{% if request.endpoint == 'sala_reunioes' %} active{% endif %}" href="{{ url_for('sala_reunioes') }}">
                <i class="bi bi-calendar-event"></i>
                SALA DE REUNIÕES
            </a>
        </li>
        <li class="nav-item">
            <a class="nav-link{% if request.endpoint == 'calendario_colaboradores' %} active{% endif %}" href="{{ url_for('calendario_colaboradores') }}">
                <i class="bi bi-calendar-check"></i>
                AGENDA
            </a>
        </li>
        {% if user_has_tag('Gestão') %}
        {% set diretoria_active = request.endpoint in ['diretoria_eventos', 'diretoria_eventos_lista', 'diretoria_eventos_visualizar', 'diretoria_eventos_editar'] %}
        <li class="nav-item">
            <a class="nav-link{% if diretoria_active %} active{% endif %}"
               data-bs-toggle="collapse"
               href="#diretoriaMenu"
               role="button"
               aria-expanded="{{ 'true' if diretoria_active else 'false' }}"
               aria-controls="diretoriaMenu">
                <i class="bi bi-people"></i>
                DIRETORIA JP
            </a>
            <div class="collapse{% if diretoria_active %} show{% endif %}" id="diretoriaMenu">
                <ul class="nav flex-column ms-3">
                    <li class="nav-item">
                        <a class="nav-link{% if request.endpoint == 'diretoria_eventos' %} active{% endif %}"
                           href="{{ url_for('diretoria_eventos') }}">
                            Criar Evento
                        </a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link{% if request.endpoint in ['diretoria_eventos_lista', 'diretoria_eventos_visualizar', 'diretoria_eventos_editar'] %} active{% endif %}"
                           href="{{ url_for('diretoria_eventos_lista') }}">
                            Listar Eventos
                        </a>
                    </li>
                </ul>
            </div>
        </li>
        {% endif %}
        <li class="nav-item">
            <a class="nav-link" data-bs-toggle="collapse" href="#tasksMenu" role="button" aria-expanded="false" aria-controls="tasksMenu">
                <i class="bi bi-list-task"></i>
                MURAL
            </a>
            <div class="collapse" id="tasksMenu">
                <ul class="nav flex-column ms-3">
                    {% if current_user.role == 'admin' %}
                    <li class="nav-item">
                        <a class="nav-link {% if request.endpoint == 'tasks_overview' %}active{% endif %}" href="{{ url_for('tasks_overview') }}">Visão Geral</a>
                    </li>
                    {% endif %}
                    {% for t in tasks_tags %}
                    <li class="nav-item">
                        <a class="nav-link {% if request.endpoint == 'tasks_sector' and request.view_args.get('tag_id') == t.id %}active{% endif %}" href="{{ url_for('tasks_sector', tag_id=t.id) }}">{{ t.nome }}</a>
                    </li>
                    {% endfor %}
                </ul>
            </div>
        </li>
        <li class="nav-item">
            <a class="nav-link {% if request.endpoint == 'notifications_center' %}active{% endif %}" href="{{ url_for('notifications_center') }}">
                <i class="bi bi-bell"></i>
                NOTIFICAÇÕES
                <span class="nav-badge{% if not unread_notifications_count %} d-none{% endif %}"
                      data-notifications-badge>
                    {{ unread_notifications_count or 0 }}
                </span>
            </a>
        </li>
    </ul>
</div>
