{% extends "base.html" %}

{% block title %}Visão Geral de Tarefas{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='tasks.css') }}">
{% endblock %}

{% block content %}
<section class="kanban">
  <div class="kanban-header">
    <h2><i class="bi bi-kanban"></i>Visão Geral de Tarefas</h2>
  </div>
  {% from "tasks_macros.html" import render_task with context %}
  {% set status_labels = {'pending': 'Pendente', 'in_progress': 'Em andamento', 'done': 'Concluída', 'blocked': 'Bloqueada'} %}
  <div class="kanban-board">
    {% for status in TaskStatus %}
    <div class="kanban-column">
      <h3>{{ status_labels[status.value] }}</h3>
      <ul class="kanban-list" data-status="{{ status.value }}">
        {% for task in tasks_by_status[status] %}
          {{ render_task(task, TaskStatus, show_tag=True) }}
        {% else %}
          <li class="empty">Nenhuma tarefa.</li>
        {% endfor %}
      </ul>
    </div>
    {% endfor %}
  </div>
</section>
<script>
  const csrfToken = "{{ csrf_token() }}";
</script>
<script src="{{ url_for('static', filename='javascript/tasks.js') }}"></script>
{% endblock %}
