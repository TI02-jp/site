{% extends "base.html" %}

{% block title %}Visualizar Tarefa{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='tasks.css') }}">
{% endblock %}

{% block sidebar_nav %}
{% include 'sidebar_home.html' %}
{% endblock %}

{% block content %}
<div class="new-task-container">
  <section class="kanban" style="gap: 1rem;">
    <div class="kanban-form">
      {% if task.parent %}
      <div class="form-group form-group-full">
        <label>Tarefa Pai</label>
        <input type="text" value="{{ task.parent.title }}" disabled>
      </div>
      {% endif %}

      <div class="form-group form-group-setor">
        <label>Setor</label>
        <input type="text" value="{{ task.tag.nome }}" disabled>
      </div>

      <div class="form-group form-group-usuario">
        <label>Usuário</label>
        <input type="text" value="{{ task.assignee.name if task.assignee else 'Sem responsável' }}" disabled>
      </div>

      <div class="form-group form-group-titulo">
        <label>Título</label>
        <input type="text" value="{{ task.title }}" disabled>
      </div>

      <div class="form-group form-group-descricao">
        <label>Descrição</label>
        <textarea rows="4" disabled>{{ task.description or '' }}</textarea>
      </div>

      <div class="form-group form-group-prazo">
        <label>Prazo</label>
        <input type="date" value="{{ task.due_date.isoformat() if task.due_date else '' }}" disabled>
      </div>

      <div class="form-group form-group-prioridade">
        <label>Prioridade</label>
        <select disabled>
          {% for value in priority_order %}
          <option value="{{ value }}" {% if task.priority.value == value %}selected{% endif %}>
            {{ priority_labels[value] }}
          </option>
          {% endfor %}
        </select>
      </div>

      <div class="form-actions">
        <a href="{{ cancel_url }}" class="btn-history">Voltar</a>
      </div>
    </div>
  </section>
</div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='javascript/tasks.js') }}"></script>
{% endblock %}
