{% extends "base.html" %}

{% block title %}Nova Tarefa{% endblock %}

{% block extra_css %}
<link rel="stylesheet" href="{{ url_for('static', filename='tasks.css') }}">
{% endblock %}

{% block sidebar_nav %}
{% include 'sidebar_home.html' %}
{% endblock %}

{% block content %}
<div class="new-task-container">
    <div class="new-task-form">
        <div class="new-task-header">
            <i class="bi bi-plus-circle"></i>
            <h2>Nova Tarefa</h2>
        </div>
        <form method="POST">
            {{ form.hidden_tag() }}
            {% if parent_task %}
            {{ form.parent_id }}
            <div class="field">
                <label>Tarefa Pai</label>
                <input type="text" value="{{ parent_task.title }}" disabled>
            </div>
            {% endif %}
            <div class="form-row">
                <div class="field">
                    {{ form.tag_id.label }}
                    {% if parent_task %}
                        {{ form.tag_id(disabled=True) }}
                    {% else %}
                        {{ form.tag_id() }}
                    {% endif %}
                </div>
                <div class="field">
                    {{ form.assigned_to.label }}
                    {{ form.assigned_to() }}
                </div>
            </div>
            <div class="form-row row-title-desc">
                <div class="field">
                    {{ form.title.label }}
                    {{ form.title() }}
                    {% for error in form.title.errors %}<div class="error">{{ error }}</div>{% endfor %}
                </div>
                <div class="field">
                    {{ form.description.label }}
                    {{ form.description() }}
                </div>
            </div>
            <div class="form-row">
                <div class="field">
                    {{ form.due_date.label }}
                    {{ form.due_date() }}
                </div>
                <div class="field">
                    {{ form.priority.label }}
                    {{ form.priority() }}
                </div>
            </div>
            <div class="form-actions">
                <a href="{{ cancel_url }}" class="button button-outline">Cancelar</a>
                {{ form.submit(class="button button-primary") }}
            </div>
        </form>
    </div>
</div>
{% endblock %}

{% block scripts %}
<script src="{{ url_for('static', filename='javascript/tasks.js') }}"></script>
{% endblock %}
